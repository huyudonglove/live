webpackJsonp([16],{a3ts:function(t,e){},jSSf:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("+63v"),i=a("y1lO"),l=a("xrTZ"),s={name:"channelList",inject:["replace","reload"],components:{pagination:n.a},data:function(){return{inputX:"",status:"",classBy:"",channelTable:[],showPagination:!1,tableHeight:0,appIdList:[],totalNum:0,sortName:"",sortType:""}},watch:{inputX:function(){this.replace("channelName",this.inputX),this.appIdList=[]},status:function(){this.replace("state",this.status),this.appIdList=[]},classBy:function(){this.replace("channelClassify",this.classBy),this.appIdList=[]},sortType:function(){this.replace("sortType",this.sortType),this.appIdList=[]},sortName:function(){this.replace("sortName",this.sortName),this.appIdList=[]},$route:function(){"channelList"==this.$route.name&&this.listData()}},methods:{sortChange:function(t){this.sortName=t.prop.replace(/[A-Z]/g,function(t,e){return"_"+t.toLowerCase()}),this.sortType="ascending"==t.order?"asc":"desc",this.listData()},handleSelectionChange:function(t){this.appIdList=t.map(function(t){return t.id})},up:function(t,e){var a=this;1==t?this.$confirm("确认上架吗？").then(function(t){Object(i.h)({ids:[e],isBatch:!1}).then(function(t){t.code?(a.$message.error(t.msg),a.channelTable.forEach(function(t){t.id==e&&(t.state=2)})):a.$message.success("上架成功")}).catch(function(t){a.channelTable.forEach(function(t){t.id==e&&(t.state=2)})})}).catch(function(t){a.channelTable.forEach(function(t){t.id==e&&(t.state=2)})}):2==t&&this.$confirm("确认下架吗？").then(function(t){Object(i.g)({ids:[e],isBatch:!1}).then(function(t){t.code?(a.$message.error(t.msg),a.channelTable.forEach(function(t){t.id==e&&(t.state=1)})):a.$message.success("下架成功")}).catch(function(t){a.channelTable.forEach(function(t){t.id==e&&(t.state=1)})})}).catch(function(t){a.channelTable.forEach(function(t){t.id==e&&(t.state=1)})})},lotUp:function(){var t=this;this.appIdList.length?Object(i.h)({ids:this.appIdList,isBatch:!0}).then(function(e){t.reload()}):this.$message.error("请勾选需要上架的行")},lotLower:function(){var t=this;this.appIdList.length?Object(i.g)({ids:this.appIdList,isBatch:!0}).then(function(e){t.reload()}):this.$message.error("请勾选需要下架的行")},listData:function(){var t=this;Object(i.y)(this.$route.query).then(function(e){t.channelTable=e.data.items.map(function(t){return t.channelCover&&(t.imgUrl=l.Base64.decode(t.channelCover)),t}),t.totalNum=e.data.total})}},created:function(){this.listData(),this.inputX=this.$route.query.channelName||"",this.status=this.$route.query.state||"",this.classBy=this.$route.query.channelClassify||""},updated:function(){var t=this;"channelList"==this.$route.name&&this.$nextTick(function(){t.tableHeight=window.innerHeight-t.$refs.channelRef.$el.offsetTop-110})}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),t._v(" "),a("el-row",{staticClass:"tac",staticStyle:{"border-bottom":"1px solid #eeeeee",padding:"15px 0"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{"suffix-icon":"el-icon-search",maxlength:"50",placeholder:"请输入频道标题"},on:{change:function(e){return t.replace("page",1)}},model:{value:t.inputX,callback:function(e){t.inputX=e},expression:"inputX"}}),t._v(" "),a("span",{staticClass:"myWords"},[t._v("\n      状态\n      "),a("el-select",{staticStyle:{width:"150px"},on:{change:function(e){return t.replace("page",1)}},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),a("el-option",{attrs:{label:"已上架",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"已下架",value:"2"}})],1)],1),t._v(" "),a("span",{staticClass:"myWords",on:{change:function(e){return t.replace("page",1)}}},[t._v("\n      类别\n      "),a("el-select",{staticStyle:{width:"150px"},model:{value:t.classBy,callback:function(e){t.classBy=e},expression:"classBy"}},[a("el-option",{attrs:{label:"全部",value:""}})],1)],1),t._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.lotUp}},[t._v("批量上架")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.lotLower}},[t._v("批量下架")]),t._v(" "),t.appIdList.length?a("span",{staticStyle:{color:"#606266"}},[a("i",{staticClass:"el-icon-warning"}),t._v("已选择"),a("span",{staticStyle:{color:"#409EFF"}},[t._v(t._s(t.appIdList.length))]),t._v("项数据")]):t._e()],1),t._v(" "),a("el-table",{ref:"channelRef",staticClass:"mt15 mb15",staticStyle:{width:"100%"},attrs:{data:t.channelTable,border:"","max-height":t.tableHeight,"row-key":"id"},on:{"sort-change":t.sortChange,"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50","reserve-selection":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"imgUrl",label:"频道封面图",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{directives:[{name:"focus",rawName:"v-focus"}],staticStyle:{width:"70px",height:"70px"},attrs:{src:t.row.imgUrl?"/static/"+t.row.imgUrl:"",alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"频道标题",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical"}},[t._v(t._s(e.row.channelName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"channelViceTopic",label:"频道副标题",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical"}},[t._v(t._s(e.row.channelViceTopic))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"channelClassify",label:"频道类别",width:"120",align:"center"}},[t._v("\n      "+t._s("全部")+"\n    ")]),t._v(" "),a("el-table-column",{attrs:{prop:"author",label:"发布用户",width:"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180",align:"center",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"最新修改时间",width:"180",align:"center",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"channelBrief",label:"频道简介",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical"}},[t._v(t._s(e.row.channelBrief))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"liveNum",label:"直播间数量",width:"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"onlineViewing",label:"在线观看人数",width:"130",align:"center",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"state",label:"上架状态",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":2},on:{change:function(a){return t.up(e.row.state,e.row.id)}},model:{value:e.row.state,callback:function(a){t.$set(e.row,"state",a)},expression:"scope.row.state"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(a){t.$router.push({path:"/channelInfo",query:{id:e.row.id,oldQuery:JSON.stringify(t.$route.query)}})}}},[t._v("详情")])]}}])})],1),t._v(" "),a("div",[a("pagination",{attrs:{totalNum:t.totalNum}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{height:"50px","border-bottom":"1px solid #DFDCDC","margin-bottom":"10px"}},[e("span",{staticStyle:{"font-size":"24px","font-weight":"bold",color:"#614a4d"}},[this._v("频道页面管理")])])}]};var c=a("VU/8")(s,o,!1,function(t){a("a3ts")},"data-v-3aa419d9",null);e.default=c.exports}});