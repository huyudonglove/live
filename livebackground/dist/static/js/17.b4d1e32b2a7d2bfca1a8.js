webpackJsonp([17],{"9JXC":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("y1lO"),n={name:"createRole",inject:["reload"],data:function(){return{isCreate:!1,isEdit:!1,roleName:"",roleCode:"",description:"",roleTree:[],loading:"",functionList:["总览","直播管理","直播管理","APP管理","APP管理","用户管理","用户管理","运维管理","运维管理","全局设置","系统管理","系统管理","系统管理","系统管理"]}},methods:{objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex;if(0===e.columnIndex)switch(t){case 0:return{rowspan:1,colspan:1};case 1:return{rowspan:2,colspan:1};case 2:return{rowspan:0,colspan:0};case 3:return{rowspan:2,colspan:1};case 4:return{rowspan:0,colspan:0};case 5:return{rowspan:2,colspan:1};case 6:return{rowspan:0,colspan:0};case 7:return{rowspan:2,colspan:1};case 8:return{rowspan:0,colspan:0};case 9:return{rowspan:1,colspan:1};case 10:return{rowspan:4,colspan:1};case 11:case 12:case 13:return{rowspan:0,colspan:0}}},getTree:function(){var e=this;this.loading=this.$loading({lock:!0,text:"数据获取中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),Object(o.F)().then(function(t){t.code?e.$message.error(t.msg):e.roleTree=t.data,e.loading.close()}).catch(function(t){e.loading.close()})},roleInfo:function(){var e=this;this.loading=this.$loading({lock:!0,text:"数据获取中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),Object(o.D)({id:parseInt(this.$route.query.id)}).then(function(t){t.code?e.$message.error(t.msg):(e.roleName=t.data.roleName,e.roleCode=t.data.roleCode,e.description=t.data.description,e.roleTree=t.data.list),e.loading.close()}).catch(function(t){e.loading.close()})},addOrEdit:function(){var e=this;""!==this.roleName?""!==this.description?this.isCreate?Object(o.c)({roleName:this.roleName,description:this.description,list:this.roleTree}).then(function(t){e.$router.go(-1)}):this.isEdit&&Object(o.p)({id:parseInt(this.$route.query.id),roleName:this.roleName,roleCode:this.roleCode,description:this.description,list:this.roleTree}).then(function(t){e.$router.go(-1)}):this.$message.error("请输入备注"):this.$message.error("请输入角色名称")}},created:function(){this.$route.query.id?(this.isEdit=!0,this.roleInfo()):(this.isCreate=!0,this.getTree())}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticStyle:{height:"50px","border-bottom":"1px solid #DFDCDC","margin-bottom":"10px"}},[e.isCreate?r("span",{staticStyle:{"font-size":"24px","font-weight":"bold",color:"#614a4d"}},[e._v("添加角色")]):e._e(),e._v(" "),e.isEdit?r("span",{staticStyle:{"font-size":"24px","font-weight":"bold",color:"#614a4d"}},[e._v("编辑角色")]):e._e()]),e._v(" "),r("div",[r("el-form",{staticStyle:{width:"70%"},attrs:{"label-position":"right","label-width":"150px"}},[r("el-form-item",{attrs:{label:"角色名称",required:!0}},[r("el-input",{staticStyle:{width:"400px"},attrs:{type:"text",maxlength:"50"},model:{value:e.roleName,callback:function(t){e.roleName="string"==typeof t?t.trim():t},expression:"roleName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注",required:!0}},[r("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",maxlength:"200","show-word-limit":"",rows:"5"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"权限设置"}},[r("el-table",{ref:"multipleTable",staticClass:"mt15 mb15",staticStyle:{width:"100%"},attrs:{data:e.roleTree,"span-method":e.objectSpanMethod,border:""}},[r("el-table-column",{attrs:{label:"功能模块",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v("\n                "+e._s(e.functionList[t.$index])+"\n              ")])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"子功能",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.name)+"\n            ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"模块操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.permissionList,function(t,o){return r("el-checkbox",{key:o,model:{value:t.isCheck,callback:function(r){e.$set(t,"isCheck",r)},expression:"item.isCheck"}},[e._v(e._s(t.name))])})}}])})],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.addOrEdit}},[e._v("确定")]),e._v(" "),r("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)])},staticRenderFns:[]};var a=r("VU/8")(n,i,!1,function(e){r("xMlr")},"data-v-36fac856",null);t.default=a.exports},xMlr:function(e,t){}});