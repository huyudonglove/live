webpackJsonp([14],{"51jU":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("y1lO"),i={name:"addUser",inject:["replace"],data:function(){return{isCreate:!1,isEdit:!1,roleList:[],form:{userName:"",email:"",phone:"",roleCode:""},rules:{userName:[{required:!0,message:"请输入用户名称",trigger:"change"},{required:!0,message:"请输入用户名称",trigger:"blur"}],roleCode:[{required:!0,message:"请选择角色",trigger:"change"},{required:!0,message:"请选择角色",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"change"},{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[34578]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"change"},{required:!0,message:"请输入邮箱",trigger:"blur"},{pattern:/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/,message:"邮箱格式不正确",trigger:"blur"}]}}},methods:{dropDown:function(){var e=this;Object(o._2)().then(function(t){e.roleList=t.data})},userInfo:function(){var e=this;Object(o.I)({id:parseInt(this.$route.query.id)}).then(function(t){e.form.userName=t.data.userName,e.form.phone=t.data.phone,e.form.email=t.data.email,e.form.roleCode=t.data.roleCode})},addOrEdit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.isCreate?Object(o.e)({userName:e.form.userName,phone:e.form.phone,email:e.form.email,roleCode:e.form.roleCode}).then(function(t){e.$router.go(-1)}):e.isEdit&&Object(o.r)({id:parseInt(e.$route.query.id),userName:e.form.userName,roleCode:e.form.roleCode}).then(function(t){e.$router.go(-1)})})}},created:function(){this.dropDown(),this.$route.query.id?(this.isEdit=!0,this.userInfo()):this.isCreate=!0}},a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticStyle:{height:"50px","border-bottom":"1px solid #DFDCDC","margin-bottom":"10px"}},[e.isCreate?r("span",{staticStyle:{"font-size":"24px","font-weight":"bold",color:"#614a4d"}},[e._v("添加用户")]):e._e(),e._v(" "),e.isEdit?r("span",{staticStyle:{"font-size":"24px","font-weight":"bold",color:"#614a4d"}},[e._v("编辑用户")]):e._e()]),e._v(" "),r("div",[r("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"10px"}},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",{staticStyle:{"font-size":"20px"}},[e._v("基本信息")])]),e._v(" "),r("el-form",{ref:"form",staticStyle:{width:"70%"},attrs:{"label-position":"right","label-width":"150px",model:e.form,rules:e.rules}},[r("el-form-item",{attrs:{label:"用户名称",prop:"userName",required:!0}},[r("el-input",{staticStyle:{width:"200px"},attrs:{type:"text",maxlength:"50"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName","string"==typeof t?t.trim():t)},expression:"form.userName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱账号",prop:"email",required:!0}},[r("el-input",{staticStyle:{width:"200px"},attrs:{disabled:e.isEdit,type:"text",maxlength:"50"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"手机号码",prop:"phone",required:!0}},[r("el-input",{staticStyle:{width:"200px"},attrs:{disabled:e.isEdit,type:"text",maxlength:"50"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"角色",prop:"roleCode",required:!0}},[r("el-select",{staticStyle:{width:"150px"},model:{value:e.form.roleCode,callback:function(t){e.$set(e.form,"roleCode",t)},expression:"form.roleCode"}},e._l(e.roleList,function(e,t){return r("el-option",{key:t,attrs:{label:e.roleName,value:e.roleCode}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:""}},[r("span",{staticStyle:{color:"red"}},[e._v("注：用户可使用邮箱作为登录帐号，默认密码为：邮箱+123")])]),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.addOrEdit}},[e._v("确定")]),e._v(" "),r("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)],1)])},staticRenderFns:[]};var s=r("VU/8")(i,a,!1,function(e){r("CupR")},"data-v-530fc728",null);t.default=s.exports},CupR:function(e,t){}});