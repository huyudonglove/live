webpackJsonp([7],{NqDD:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("Dd8w"),n=a.n(l),i=a("+63v"),r=a("y1lO"),o={name:"vrPlayback",inject:["replace","reload"],data:function(){return{wd:"",q:"",tableData:[],tableHeight:250,status:"",roomName:"",roomsList:[],total:0,roomId:null,liveState:"",isOnShelf:"",gridData:[],dialogTableVisible:!1}},computed:{},watch:{status:function(){this.replace("status",this.status)},roomName:function(){this.replace("roomName",this.roomName)},$route:function(){"vrPlayback"==this.$route.name&&this.listData()}},methods:{listData:function(){var t=this;Object(r._6)(n()({},this.$route.query)).then(function(e){t.tableData=e.data.items,t.total=e.data.total})},del:function(t){var e=this;Object(r._5)({playbackId:t,serverActionType:3}).then(function(t){t.code?e.$message.error(t.msg):e.reload()})},getData:function(t,e,a,l){var n=this;this.roomId=l,this.liveState=e,this.isOnShelf=a,Object(r._4)({playbackId:t}).then(function(t){n.gridData=t.data})},openWin:function(t,e,a,l){var n=this;Object(r.O)({replayId:l}).then(function(a){if(a.data){var i=a.data.cameras.map(function(t){return t.camareId}).indexOf(e),r=a.data.cameras[i].files.length?a.data.cameras[i].files[0].fileId:null,o=n.$router.resolve({name:"playAliplayer2"}),s=a.data.cameras[i].files.length?a.data.cameras[i].files[0].resolvingName:null;window.open(o.href+"?playbackId="+l+"&videoUrl="+r+"&roomId="+t+"&camareId="+e+"&status="+s+"&first=2","win2","height=800,width=1000,toolbar =no, menubar=yes, scrollbars=no, resizable=no, location=no, status=no")}else n.$message.error(a.msg)})}},created:function(){this.wd=this.$route.query.wd||"",this.q=this.$route.query.q||"",this.status=this.$route.query.status||"",this.liveStatus=this.$route.query.liveStatus||"",this.listData()},updated:function(){var t=this;"vrPlayback"==this.$route.name&&this.$nextTick(function(){t.tableHeight=window.innerHeight-t.$refs.multipleTable.$el.offsetTop-110})},components:{pagination:i.a}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["vrPlayback"==t.$route.name?a("div",[t._m(0),t._v(" "),a("el-row",{staticClass:"tac",staticStyle:{padding:"15px 0"}},[a("span",{staticClass:"myWords"},[t._v("\n        直播间名称：\n        "),a("el-input",{staticStyle:{width:"250px"},attrs:{"suffix-icon":"el-icon-search",maxlength:"50",placeholder:"请输入直播间名称"},on:{change:function(e){return t.replace("page",1)}},model:{value:t.roomName,callback:function(e){t.roomName=e},expression:"roomName"}})],1),t._v(" "),a("span",{staticClass:"myWords"},[t._v("\n       \n        回放状态：\n        "),a("el-select",{staticStyle:{width:"220px"},on:{change:function(e){return t.replace("page",1)}},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),a("el-option",{attrs:{label:"未开播",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"回放中",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"已结束",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"--",value:"4"}})],1)],1)]),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"mt15 mb15 el-table",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","max-height":t.tableHeight}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"roomName",label:"直播间名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"videoName",label:"回放名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"deviceCount",label:"机位数量",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"startTime",label:"直播开始时间",align:"center",width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"endTime",label:"直播结束时间",width:"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"回放创建时间",width:"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"playStatus",label:"回放状态",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.playStatus?a("span",[t._v("未开播")]):t._e(),t._v(" "),1==e.row.playStatus?a("span",[t._v("直播中")]):t._e(),t._v(" "),2==e.row.playStatus?a("span",[t._v("回放中")]):t._e(),t._v(" "),3==e.row.playStatus?a("span",{staticStyle:{color:"red"}},[t._v("已结束")]):t._e(),t._v(" "),e.row.playStatus?t._e():a("span",[t._v("--")])]}}],null,!1,1859479112)}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"上架状态",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("span",[t._v("上架")]):t._e(),t._v(" "),2==e.row.status?a("span",{staticStyle:{color:"red"}},[t._v("下架")]):t._e()]}}],null,!1,3600407167)}),t._v(" "),a("el-table-column",{key:"3",attrs:{label:"操作",fixed:"right",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini",disabled:2==e.row.status},on:{click:function(a){t.dialogTableVisible=!0,t.getData(e.row.id,e.row.playStatus,e.row.status,e.row.roomId)}}},[t._v("机位列表")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",disabled:0==e.row.playStatus||2==e.row.playStatus},on:{click:function(a){return t.del(e.row.id)}}},[t._v("删除")])]}}],null,!1,1196390076)})],1),t._v(" "),a("pagination",{attrs:{totalNum:t.total}}),t._v(" "),a("el-dialog",{attrs:{title:"机位列表",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-table",{staticClass:"mt15 mb15 el-table",staticStyle:{width:"100%"},attrs:{data:t.gridData,border:""}},[a("el-table-column",{attrs:{property:"id",label:"id",width:"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"createTime",label:"日期",width:"180",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"camareName",label:"机位名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.openWin(t.roomId,e.row.camareId,e.row.id,e.row.playbackId)}}},[t._v("预览")])]}}],null,!1,3731341843)})],1)],1)],1):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{height:"50px","border-bottom":"1px solid #DFDCDC"}},[e("span",{staticStyle:{"font-size":"24px","font-weight":"bold",color:"#614a4d"}},[this._v("VR直播回放")])])}]};var c=a("VU/8")(o,s,!1,function(t){a("mT3T")},"data-v-71acc820",null);e.default=c.exports},mT3T:function(t,e){}});
//# sourceMappingURL=7.bd38aa1e55cf9b7aa3b5.js.map