{"version":3,"sources":["webpack:///src/share/uploadImage.vue","webpack:///./src/share/uploadImage.vue?8bb3","webpack:///./src/share/uploadImage.vue","webpack:///src/components/vrLiving/channels/channelsCreate.vue","webpack:///./src/components/vrLiving/channels/channelsCreate.vue?4e4b","webpack:///./src/components/vrLiving/channels/channelsCreate.vue"],"names":["uploadImage","name","props","data","imageUrl","msg","header","Authorization","this","$cookies","get","src_self","methods","handleAvatarSuccess","res","file","code","$message","error","URL","createObjectURL","raw","$emit","fileId","originFileName","size","type","beforeAvatarUpload","_this","isLt2M","promise_default","a","resolve","reject","_URL","window","webkitURL","img","Image","onload","width","height","src","then","watch","id","_this2","mounted","_this3","moduleCode","share_uploadImage","render","_h","$createElement","_c","_self","ref","staticClass","attrs","action","headers","show-file-list","on-success","before-upload","staticRenderFns","src_share_uploadImage","__webpack_require__","normalizeComponent","ssrContext","channelsCreate","inject","components","imgId","isCreate","formSize","channelName","channelClassify","channelBrief","channelCover","channelImg","channelViceTopic","state","rules","required","message","trigger","min","max","computed","getImg","$nextTick","$refs","clearValidate","infoData","Object","request","JSON","parse","$route","query","loading","close","stringify_default","base64","decode","catch","err","submitForm","formName","validate","valid","console","log","extends_default","$router","go","updateTime","created","$loading","lock","text","spinner","background","channels_channelsCreate","_vm","staticStyle","border-bottom","font-size","font-weight","color","content","on","back","$event","_v","margin-top","model","label-width","label","prop","maxlength","show-word-limit","value","callback","$$v","$set","trim","expression","placeholder","limit","rows","margin","click","_e","channelsCreate_Component","channelsCreate_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/4.512ec4c9175cac8d8302.js","sourcesContent":["<template>\r\n    <div>\r\n      <el-upload\r\n        class=\"avatar-uploader\"\r\n        :action=\"`/api/file/upload`\"\r\n        :data=\"msg\"\r\n        :headers=\"header\"\r\n        :show-file-list=\"false\"\r\n        :on-success=\"handleAvatarSuccess\"\r\n        :before-upload=\"beforeAvatarUpload\"\r\n         ref=\"images\"\r\n        >\r\n        <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\r\n        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n      </el-upload>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {selfCookie} from \"../self\";\r\nexport default {\r\n  name: 'uploadImg',\r\n  props: ['size', 'type', 'id', 'limit', 'moduleCode'],\r\n  data () {\r\n    return {\r\n      imageUrl: '',\r\n      msg: {\r\n      },\r\n      header: {\r\n        Authorization: this.$cookies.get(selfCookie)\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    handleAvatarSuccess (res, file) {\r\n      if (res.code) {\r\n        this.$message.error(res.msg)\r\n        return\r\n      }\r\n      this.imageUrl = URL.createObjectURL(file.raw)\r\n      this.$emit('getImg', res.data.fileId, res.data.originFileName, res.data.size, this.type)\r\n    },\r\n    beforeAvatarUpload (file) {\r\n      const isLt2M = file.size / 1024 / 1024 < (this.size * 1)\r\n      const isPNG = file.type == 'image/jpeg' || file.type == 'image/png'\r\n      if (!isPNG) {\r\n        this.$message.error('上传头像图片只能是 JPG或者PNG 格式!')\r\n        return false// 判断jpg/png\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error(`上传图片大小不能超过 ${this.size}MB!`)\r\n        return false// 判断size\r\n      }\r\n      const isSize = new Promise(function(resolve, reject) {\r\n      let width = 1920;\r\n      let minHeight = 500;\r\n      let maxHeight = 900\r\n      let _URL = window.URL || window.webkitURL;         \r\n      let img = new Image();\r\n      img.onload = function() {\r\n          let valid = img.width <= 1920 && img.height <= maxHeight&& img.height >= minHeight;\r\n          valid ? resolve() : reject();\r\n      }\r\n          img.src = _URL.createObjectURL(file);\r\n      }).then(() => {\r\n          return file;\r\n      }, () => {\r\n          this.$message.error('上传的图片宽:不能大于1920px，高：500px-900px,');\r\n          return Promise.reject();\r\n      });\r\n      return  isSize;\r\n    }\r\n    \r\n  },\r\n  watch: {\r\n    id () {\r\n      this.id ? (() => {\r\n        this.imageUrl = this.id\r\n      })() : (() => {\r\n        this.imageUrl = ''\r\n      })()\r\n    }\r\n  },\r\n  mounted () {\r\n    this.msg.type = this.type\r\n    this.msg.moduleCode = this.moduleCode\r\n    this.id ? (() => {\r\n      this.imageUrl = this.id\r\n    })() : (() => {\r\n      this.imageUrl = ''\r\n    })()\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n  .avatar-uploader .el-upload {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n  .avatar-uploader .el-upload:hover {\r\n    border-color: #409EFF;\r\n  }\r\n  .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 178px;\r\n    line-height: 178px !important;\r\n    text-align: center;\r\n  }\r\n  .avatar {\r\n    width: 178px;\r\n    height: 178px;\r\n    display: block;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/share/uploadImage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-upload',{ref:\"images\",staticClass:\"avatar-uploader\",attrs:{\"action\":\"/api/file/upload\",\"data\":_vm.msg,\"headers\":_vm.header,\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.imageUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.imageUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-9005be10\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/share/uploadImage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-9005be10\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./uploadImage.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./uploadImage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./uploadImage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-9005be10\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./uploadImage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/share/uploadImage.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div>\r\n    <div v-if=\"$route.name=='channelsCreate'\">\r\n       <div style=\"height:50px;border-bottom:1px solid #DFDCDC;\">\r\n         <el-page-header @back=\"$router.go(-1)\" content=\"新增频道\" style=\"font-size:24px;font-weight:bold;color:#614a4d;\" v-if=\"isCreate\">\r\n        </el-page-header >\r\n        <el-page-header @back=\"$router.go(-1)\" content=\"编辑频道\" style=\"font-size:24px;font-weight:bold;color:#614a4d;\" v-else>\r\n        </el-page-header >\r\n      </div>\r\n       <div  style=\"margin-top:20px;width:50%\">\r\n        <el-form ref=\"formSize\" :model=\"formSize\" label-width=\"160px\" :rules=\"rules\">\r\n          <el-form-item label=\"频道名称：\" prop=\"channelName\">\r\n            <el-input v-model.trim=\"formSize.channelName\"  maxlength=\"28\" show-word-limit></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"副标题：\" prop=\"channelViceTopic\">\r\n            <el-input v-model=\"formSize.channelViceTopic\" maxlength=\"28\" show-word-limit></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"频道分类：\" prop=\"channelClassify\">\r\n            <el-select v-model=\"formSize.channelClassify\" placeholder=\"请选择\" style=\"width:100%\">\r\n              <el-option label=\"全部\" value='1'></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"频道封面图：\" prop=\"channelCover\" ref=\"uploadImage\">\r\n            <uploadImage :size=\"1\" type=\"image\" @getImg=\"getImg\" :id=\"imgId\" :limit=\"1\" moduleCode=\"vr\" ></uploadImage>\r\n            <span style=\"font-size:12px;color:#909399\">建议采用jpg或png格式图片，宽：不能大于1920px，高：500px-900px, 大小小于1M</span>\r\n          </el-form-item>\r\n          <el-form-item label=\"频道简介：\" prop=\"channelBrief\">\r\n            <el-input type=\"textarea\" v-model=\"formSize.channelBrief\" rows=\"2\" maxlength=\"100\" show-word-limit></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"频道上架状态：\" prop=\"state\">\r\n            <el-select v-model=\"formSize.state\" placeholder=\"请选择\" style=\"width:100%\">\r\n              <el-option label=\"上架\" value='1'></el-option>\r\n              <el-option label=\"下架\" value='2'></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          </el-form>\r\n          <div style=\"width:170px;margin:0px auto\">\r\n          <el-button type=\"primary\" @click=\"submitForm('formSize')\">确 定</el-button>\r\n          <el-button @click=\"$router.go(-1)\">取 消</el-button>\r\n          </div>\r\n        </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Base64 } from 'js-base64'\r\nimport uploadImage from '../../../share/uploadImage'\r\nimport {channelsAdd,channelsInfo,channelsEdit} from '../../../http/request'\r\nexport default {\r\n  name: 'channelsCreate',\r\n  inject: ['replace', 'reload'],\r\n  components: {\r\n    uploadImage\r\n  },\r\n  data () {\r\n    return {\r\n      imgId: '',\r\n      isCreate:true,\r\n      formSize: {\r\n       channelName: '',\r\n       channelClassify: '',\r\n       channelBrief: '',\r\n       channelCover: '',\r\n       channelImg:'',\r\n       channelViceTopic: '',\r\n       state:'1'\r\n      },\r\n      rules: {\r\n       channelName: [\r\n          { required: true, message: '请输入频道名称', trigger: 'change' },\r\n          { min: 1, max: 28, message: '长度在 1 到 28 个字符', trigger: 'change' }\r\n        ],\r\n       channelViceTopic: [\r\n          { required: true, message: '请输入频道副标题', trigger: 'change' },\r\n          { min: 1, max: 28, message: '长度在 1 到 28 个字符', trigger: 'change' }\r\n        ],\r\n       channelClassify: [\r\n          { required: true, message: '请选择频道分类', trigger: ['change'] }\r\n        ],\r\n       channelBrief: [\r\n          { required: true, message: '请输入频道简介', trigger: 'change' },\r\n          { min: 1, max: 100, message: '长度在 1 到 100 个字符', trigger: 'change' }\r\n        ],\r\n       channelCover: [\r\n          { required: true, message: '请上传频道封面', trigger: 'change' }\r\n        ],\r\n        state: [\r\n          { required: true, message: '频道上架状态', trigger: 'change' }\r\n        ],\r\n      },\r\n    }\r\n  },\r\n  computed: {\r\n  },\r\n  watch: {\r\n  },\r\n  methods: {\r\n   getImg (fileId, originFileName, size, type) {\r\n      this.formSize.channelCover = fileId\r\n      this.$nextTick(() => {\r\n        this.$refs.uploadImage.clearValidate()\r\n      })\r\n    },\r\n    infoData () {\r\n      channelsInfo({id: JSON.parse(this.$route.query.msg).id}).then(res => {\r\n        if (res.code) {\r\n          this.$message.error(res.msg)\r\n        } else {\r\n          this.loading.close();\r\n          this.formSize = res.data\r\n          this.formSize.state=JSON.stringify(res.data.state)\r\n          this.formSize.channelClassify=JSON.stringify(res.data.channelClassify)\r\n          this.formSize.channelImg = `/static/${Base64.decode(this.formSize.channelCover)}`\r\n          this.imgId = `/static/${Base64.decode(this.formSize.channelCover)}`\r\n        }\r\n      }).catch(err=>{\r\n        this.loading.close();\r\n      })\r\n    },\r\n    submitForm (formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          if(this.isCreate){\r\n            channelsAdd({...this.formSize}).then(res => {\r\n            if (res.code) {\r\n              this.$message.error(res.msg)\r\n            } else {\r\n              this.$router.go(-1)\r\n            }\r\n          })\r\n          }else{\r\n            channelsEdit({...this.formSize,updateTime:null}).then(res => {\r\n            if (res.code) {\r\n              this.$message.error(res.msg)\r\n            } else {\r\n              this.$router.go(-1)\r\n            }\r\n          })\r\n          }\r\n          \r\n        } else {\r\n          console.log('error submit!!')\r\n          return false\r\n        }\r\n      })\r\n    }\r\n  },\r\n  created () {\r\n    let id=JSON.parse(this.$route.query.msg).id\r\n    if(id){\r\n    this.loading=this.$loading({\r\n        lock: true,\r\n        text: '数据获取中...',\r\n        spinner: 'el-icon-loading',\r\n        background: 'rgba(0, 0, 0, 0.7)'\r\n      });\r\n     this.isCreate=false\r\n     this.infoData()\r\n    }\r\n   \r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.tac span {\r\n  padding-left: 5px;\r\n  padding-right: 10px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/vrLiving/channels/channelsCreate.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.$route.name=='channelsCreate')?_c('div',[_c('div',{staticStyle:{\"height\":\"50px\",\"border-bottom\":\"1px solid #DFDCDC\"}},[(_vm.isCreate)?_c('el-page-header',{staticStyle:{\"font-size\":\"24px\",\"font-weight\":\"bold\",\"color\":\"#614a4d\"},attrs:{\"content\":\"新增频道\"},on:{\"back\":function($event){return _vm.$router.go(-1)}}}):_c('el-page-header',{staticStyle:{\"font-size\":\"24px\",\"font-weight\":\"bold\",\"color\":\"#614a4d\"},attrs:{\"content\":\"编辑频道\"},on:{\"back\":function($event){return _vm.$router.go(-1)}}})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"20px\",\"width\":\"50%\"}},[_c('el-form',{ref:\"formSize\",attrs:{\"model\":_vm.formSize,\"label-width\":\"160px\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"频道名称：\",\"prop\":\"channelName\"}},[_c('el-input',{attrs:{\"maxlength\":\"28\",\"show-word-limit\":\"\"},model:{value:(_vm.formSize.channelName),callback:function ($$v) {_vm.$set(_vm.formSize, \"channelName\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formSize.channelName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"副标题：\",\"prop\":\"channelViceTopic\"}},[_c('el-input',{attrs:{\"maxlength\":\"28\",\"show-word-limit\":\"\"},model:{value:(_vm.formSize.channelViceTopic),callback:function ($$v) {_vm.$set(_vm.formSize, \"channelViceTopic\", $$v)},expression:\"formSize.channelViceTopic\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"频道分类：\",\"prop\":\"channelClassify\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.formSize.channelClassify),callback:function ($$v) {_vm.$set(_vm.formSize, \"channelClassify\", $$v)},expression:\"formSize.channelClassify\"}},[_c('el-option',{attrs:{\"label\":\"全部\",\"value\":\"1\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',{ref:\"uploadImage\",attrs:{\"label\":\"频道封面图：\",\"prop\":\"channelCover\"}},[_c('uploadImage',{attrs:{\"size\":1,\"type\":\"image\",\"id\":_vm.imgId,\"limit\":1,\"moduleCode\":\"vr\"},on:{\"getImg\":_vm.getImg}}),_vm._v(\" \"),_c('span',{staticStyle:{\"font-size\":\"12px\",\"color\":\"#909399\"}},[_vm._v(\"建议采用jpg或png格式图片，宽：不能大于1920px，高：500px-900px, 大小小于1M\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"频道简介：\",\"prop\":\"channelBrief\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":\"2\",\"maxlength\":\"100\",\"show-word-limit\":\"\"},model:{value:(_vm.formSize.channelBrief),callback:function ($$v) {_vm.$set(_vm.formSize, \"channelBrief\", $$v)},expression:\"formSize.channelBrief\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"频道上架状态：\",\"prop\":\"state\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.formSize.state),callback:function ($$v) {_vm.$set(_vm.formSize, \"state\", $$v)},expression:\"formSize.state\"}},[_c('el-option',{attrs:{\"label\":\"上架\",\"value\":\"1\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"下架\",\"value\":\"2\"}})],1)],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"170px\",\"margin\":\"0px auto\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('formSize')}}},[_vm._v(\"确 定\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_vm._v(\"取 消\")])],1)],1)]):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-edf788ee\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/vrLiving/channels/channelsCreate.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-edf788ee\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./channelsCreate.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./channelsCreate.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./channelsCreate.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-edf788ee\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./channelsCreate.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-edf788ee\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/vrLiving/channels/channelsCreate.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}