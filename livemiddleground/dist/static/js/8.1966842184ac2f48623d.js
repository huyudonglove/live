webpackJsonp([8],{LrQe:function(e,t){},bwAg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),i=a.n(n),o=a("xrTZ"),l=a("+63v"),r=a("abj+"),s=a("y1lO"),c={name:"channelsListInfo",inject:["replace","reload"],components:{pagination:l.a,playBack:r.a},data:function(){return{tableData:[],roomId:"",formSize:{channelsName:"",channelsClassify:"",channelsBrief:"",channelsCover:"",channelsViceTopic:""},total:0,playV:!1,playType:"edit"}},computed:{},watch:{$route:function(){"channelsListInfo"==this.$route.name&&(this.listData(),this.infoData())}},methods:{oneKey:function(e){var t=this;Object(s.K)(e).then(function(e){e.code?t.$message.error(e.msg):t.reload()})},stopReview:function(e){var t=this;Object(s.X)(e).then(function(e){e.code?t.$message.error(e.msg):t.reload()})},infoData:function(){var e=this;Object(s.f)({id:this.$route.query.id}).then(function(t){t.code?e.$message.error(t.msg):(e.formSize=t.data,e.formSize.channelCover="/static/"+o.Base64.decode(e.formSize.channelCover))})},listData:function(){var e=this;Object(s.R)(i()({},this.$route.query,{orderBy:1,channelId:this.$route.query.id})).then(function(t){e.tableData=t.data.items,e.tableData=e.tableData.map(function(e){return e.liveCover&&(e.liveCover="/static/"+o.Base64.decode(e.liveCover)),e}),e.total=t.data.total})},upState:function(e,t){var a=this;2===e?Object(s.S)({id:t,state:e}).then(function(e){e.code&&a.$message.error(e.msg)}).catch(function(e){a.tableData=a.tableData.map(function(e){return e.id==t&&(e.isOnShelf=1),e})}):Object(s.T)({id:t,state:e}).then(function(e){e.code&&a.$message.error(e.msg)}).catch(function(e){a.tableData=a.tableData.map(function(e){return e.id==t&&(e.isOnShelf=2),e})})},addP:function(){this.$refs.playBack.savePlayback()},openWin:function(e,t,a){var n=this,i=this.$router.resolve({name:"aliplayer"});Object(s.F)({id:e}).then(function(o){var l=o.data.cameraList?o.data.cameraList:[];if(l.length&&1==t){var r=1==t&&1==a?o.data.cameraList[0].deviceDto.address:"",s=1==t&&1==a?o.data.cameraList[0].deviceDto.token:"";window.open(i.href+"?rtmpUrl="+r+"&token="+s+"&id="+e+"&liveState="+t+"&state="+a+"&first=1","win1","height=800,width=1000,toolbar =no, menubar=yes, scrollbars=no, resizable=no, location=no, status=no")}else if(l.length||1!=t)if(o.data){window.open(i.href+"?rtmpUrl=&id="+e+"&liveState="+t+"&state="+a+"&first=1","win1","height=800,width=1000,toolbar =no, menubar=yes, scrollbars=no, resizable=no, location=no, status=no")}else n.$message.error("没有播放地址");else{window.open(i.href+"?rtmpUrl=&id="+e+"&liveState=-1&state="+a+"&first=1","win1","height=800,width=1000,toolbar =no, menubar=yes, scrollbars=no, resizable=no, location=no, status=no")}})},openWin2:function(e,t,a,n){var i=this;Object(s.P)({roomId:e}).then(function(t){if(t.data){var a=t.data.cameras[index].files.length?t.data.cameras[index].files[0].fileId:null,n=i.$router.resolve({name:"playAliplayer2"}),o=t.data.cameras[index].files.length?t.data.cameras[index].files[0].resolvingName:null;window.open(n.href+"?videoUrl="+a+"&roomId="+e+"&status="+o+"&first=1","win2","height=800,width=1000,toolbar =no, menubar=yes, scrollbars=no, resizable=no, location=no, status=no")}else i.$message.error(t.msg)})},del:function(e){var t=this;Object(s.n)(e).then(function(e){t.reload()})}},created:function(){this.listData(),this.infoData()}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["channelsListInfo"==e.$route.name?a("div",[a("div",{staticStyle:{height:"50px","border-bottom":"1px solid #DFDCDC"}},[a("el-page-header",{staticStyle:{"font-size":"24px","font-weight":"bold",color:"#614a4d"},attrs:{content:"管理频道"},on:{back:function(t){return e.$router.go(-1)}}}),e._v(" "),a("el-button",{staticStyle:{top:"10px",position:"absolute",right:"15px"},attrs:{type:"primary"},on:{click:function(t){e.$router.push({path:"/channelsList/channelsCreate",query:{msg:JSON.stringify(e.$route.query)}})}}},[e._v("频道编辑")])],1),e._v(" "),a("div",{staticStyle:{overflow:"hidden","margin-top":"20px",position:"relative"}},[a("img",{directives:[{name:"focus",rawName:"v-focus"}],staticStyle:{width:"200px",height:"200px",float:"left"},attrs:{src:e.formSize.channelCover?""+e.formSize.channelCover:null,alt:""}}),e._v(" "),a("div",{staticStyle:{position:"absolute",left:"220px"}},[a("h3",[e._v(e._s(e.formSize.channelName))]),e._v(" "),a("h5",[e._v("副标题："+e._s(e.formSize.channelViceTopic))]),e._v(" "),a("p",[e._v("简介："+e._s(e.formSize.channelBrief))]),e._v(" "),a("p",[e._v("状态："),1==e.formSize.state?a("span",[e._v("上架")]):e._e(),e._v(" "),2==e.formSize.state?a("span",{staticStyle:{color:"#FF644E"}},[e._v("下架")]):e._e()])])]),e._v(" "),a("el-divider"),e._v(" "),a("div",{staticStyle:{height:"50px","border-bottom":"1px solid #DFDCDC"}},[a("span",{staticStyle:{"font-size":"16px",color:"#614a4d"}},[e._v("直播间数量："+e._s(e.formSize.liveNum))]),e._v(" "),a("span",{staticStyle:{"font-size":"16px",color:"#614a4d","padding-left":"60px"}},[e._v("在线观看人数："+e._s(e.formSize.onlineViewing))]),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/live/addLive?roomId="+e.$route.query.id)}}},[e._v("创建直播间")])],1),e._v(" "),a("el-table",{ref:"groundRef",staticClass:"mt15",staticStyle:{width:"100%","margin-bottom":"32px"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"liveCover",label:"封面图",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{directives:[{name:"focus",rawName:"v-focus"}],staticStyle:{width:"70px",height:"70px"},attrs:{src:e.row.liveCover?""+e.row.liveCover:null,alt:""}})]}}],null,!1,4034073008)}),e._v(" "),a("el-table-column",{attrs:{prop:"liveName",label:"直播间名称",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.liveName.length>15?t.row.liveName.substring(0,15)+"......":t.row.liveName)+"\n          ")]}}],null,!1,3365336876)}),e._v(" "),a("el-table-column",{attrs:{prop:"liveState",label:"直播状态",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.liveState?a("span",[e._v("未开播")]):e._e(),e._v(" "),1==t.row.liveState?a("span",[e._v("直播中")]):e._e(),e._v(" "),3==t.row.liveState?a("span",[e._v("已结束")]):e._e()]}}],null,!1,3151397226)}),e._v(" "),a("el-table-column",{attrs:{prop:"isNeedPassword",label:"直播间密码",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.isNeedPassword?a("span",[e._v("有")]):e._e(),e._v(" "),1==t.row.isNeedPassword?a("span",[e._v("无")]):e._e()]}}],null,!1,287278040)}),e._v(" "),a("el-table-column",{attrs:{prop:"liveNetRule",label:"网络规则",align:"center",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.liveNetRule?a("span",[e._v("公网")]):e._e(),e._v(" "),0==t.row.liveNetRule?a("span",[e._v("内网")]):e._e()]}}],null,!1,2768971416)}),e._v(" "),a("el-table-column",{attrs:{prop:"lastLiveTime",label:"上次直播时间",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.lastLiveTime?t.row.lastLiveTime:"--")+"\n          ")]}}],null,!1,3658552888)}),e._v(" "),a("el-table-column",{attrs:{prop:"cameraNum",label:"机位数",align:"center",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"onlineViewing",label:"在线观看人数",align:"center",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"liveUrl",label:"直播地址",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.openWin(t.row.id,t.row.liveState,t.row.isOnShelf)}}},[e._v("观看")])]}}],null,!1,664759697)}),e._v(" "),a("el-table-column",{attrs:{prop:"isOnShelf",label:"状态",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isOnShelf?a("span",[e._v("上架")]):e._e(),e._v(" "),2==t.row.isOnShelf?a("span",{staticStyle:{color:"#FF644E"}},[e._v("下架")]):e._e()]}}],null,!1,2233619484)}),e._v(" "),a("el-table-column",{attrs:{prop:"isOnShelf",label:"上架/下架",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{disabled:1==t.row.liveState||2==t.row.liveState,"active-value":1,"inactive-value":2},on:{change:function(a){return e.upState(t.row.isOnShelf,t.row.id)}},model:{value:t.row.isOnShelf,callback:function(a){e.$set(t.row,"isOnShelf",a)},expression:"scope.row.isOnShelf"}})]}}],null,!1,141586216)}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.liveState&&1==t.row.isOnShelf?a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(a){return e.oneKey({id:t.row.id})}}},[e._v("一键下播")]):e._e(),e._v(" "),3==t.row.liveState&&1==t.row.isOnShelf||0==t.row.liveState&&1==t.row.isOnShelf?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){return e.$router.push({path:"/live/editLive",query:{id:t.row.id}})}}},[e._v("直播设置")]):e._e(),e._v(" "),2==t.row.isOnShelf?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.del(t.row.id)}}},[e._v("删除")]):e._e()]}}],null,!1,1325545719)})],1),e._v(" "),a("div",[a("pagination",{attrs:{totalNum:e.total}})],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:"提示",visible:e.playV,width:"30%"},on:{"update:visible":function(t){e.playV=t}}},[a("span",[e.playV?a("playBack",{ref:"playBack",attrs:{roomId:e.roomId}}):e._e()],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.playV=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:"dis"==e.playType},on:{click:function(t){return e.addP()}}},[e._v("确 定")])],1)])],1)],1):e._e()])},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(e){a("LrQe")},"data-v-235c4734",null);t.default=d.exports}});
//# sourceMappingURL=8.1966842184ac2f48623d.js.map